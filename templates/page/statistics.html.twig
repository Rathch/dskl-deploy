{% extends 'page/layout.html.twig' %}

{% block title %}Blog Index{% endblock %}

{% block page_contents %}
    {% set currentYear = 2082 %}
    <h2 class="text-center">Statistiken</h2>
    <div class="row justify-content-md-center">
        <div class="row">
            <div class="col-6">
                <div class="card">
                    <div class="card-body">
                        <h3 class="card-title text-center">10 Wertvollsten Kader</h3>
                        <table class="table table-hover table-responsive">
                            <tr>
                                <th>#</th>
                                <th>Team</th>
                                <th>Kaderwert</th>
                            </tr>
                            {% for MostValue in MostValuesByTeam %}
                                <tr>
                                    <td>{{ loop.index }}</td>
                                    <td>{{ MostValue.team.name }}</td>
                                    <td>{{ MostValue.value | format_currency('EUR', {fraction_digit: 0})  }}</td>
                                </tr>
                            {% endfor %}
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-6">
                <div class="card">
                    <div class="card-body">
                        <h3 class="card-title text-center">Meisten Kills</h3>
                        <table class="table table-hover table-responsive">
                            <tr>
                                <th>#</th>
                                <th>Team</th>
                                <th>Kills</th>
                            </tr>
                            {% for TopTenKill in TopTenKills %}
                                <tr>
                                    <td>{{ loop.index }}</td>
                                    <td>{{ TopTenKill.team.name }}</td>
                                    <td>{{ TopTenKill.kills  }}</td>
                                </tr>
                            {% endfor %}
                        </table>
                    </div>
                </div>
            </div>
            {% for MostValueByPossition in MostValuesByPossition %}
            <div class="col-6 mt-2 mb-2">
                <div class="card">
                    <div class="card-body">
                        <h3 class="card-title text-center">Top 10 der Teuersten {{ MostValueByPossition.0.position }}</h3>
                        <table class="table table-hover table-responsive">
                            <tr>
                                <th>#</th>
                                <th>Spielername</th>
                                <th>Wert</th>
                                <th>Team</th>
                            </tr>
                            {% for MostValue in MostValueByPossition %}
                                <tr>
                                    <td>{{ loop.index }}</td>
                                    <td>{{ MostValue.name }}</td>
                                    <td>{{ MostValue.value | format_currency('EUR', {fraction_digit: 0}) }}</td>
                                    <td>{{ MostValue.team.name }}</td>
                                </tr>
                            {% endfor %}
                        </table>
                    </div>
                </div>
            </div>
            {% endfor %}
            {% for MethaTyps in TopTenMethaTyp %}
            <div class="col-6 mt-2 mb-2">
                <div class="card">
                    <div class="card-body">
                        <h3 class="card-title text-center">Team mit den meisten {{ MethaTyps.0.methaTyp }}</h3>
                        <table class="table table-hover table-responsive">
                            <tr>
                                <th>#</th>
                                <th>Anzahl</th>
                                <th>Team</th>
                            </tr>
                            {% for MethaTyp in MethaTyps %}
                                <tr>
                                    <td>{{ loop.index }}</td>
                                    <td>{{ MethaTyp.methaTypAmount }}</td>
                                    <td>
                                        {% for team in teams %}
                                            {% if MethaTyp.team_id == team.id %}
                                                {{ team.name }}
                                            {% endif %}
                                        {% endfor %}
                                    </td>
                                </tr>
                            {% endfor %}
                        </table>
                    </div>
                </div>
            </div>
            {% endfor %}
            <div class="col-6 mt-2 mb-2">
                <div class="card">
                    <div class="card-body">
                        <h3 class="card-title text-center">Durchschnitsalter pro Team</h3>
                        <table class="table table-hover table-responsive">
                            <tr>
                                <th>#</th>
                                <th>Durchschnitsalter</th>
                                <th>Team</th>
                            </tr>
                            {% for AverageAge in AverageAgeByTeam %}
                                <tr>
                                    <td>{{ loop.index }}</td>
                                    <td>{{ (currentYear-AverageAge.avrageAge) | format_number({fraction_digit: 0})  }}</td>
                                    <td>{{ AverageAge.team.name }}</td>
                                </tr>
                            {% endfor %}
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
